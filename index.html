<!DOCTYPE html>
<html>

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


   <title>PA#2</title>

   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
   <script src="./Utils/trackball-rotator.js"></script>
   <script src="./Utils/m4.js"></script>
   <script src="./shader.gpu"></script>
   <script src="./main.js"></script>

</head>

<body onload="init()">

<h3 class="m-3" style="text-align: center;">PA2</h2>


   <div class="container mt-5">
      <div class="row mb-4" style="display: flex; width: 100%;">
         <span style="flex: 1;"><b>Light:</b>Directional</span>
         <span style="flex: 1;"><b>Shading:</b>Gouraud</span>
         <span style="flex: 1;"><b>Projection:</b>Perspective</span>
         <span style="flex: 1;"><b>Analytics:</b>Normal</span>
      </div>
      <div class="d-flex">
         <div id="canvas-holder">
            <canvas class="rounded-1" width="800" height="600" id="webglcanvas" style="background-color: teal"></canvas>
         </div>

         <div class="p-2" style="width: 100%">
            <div class="input-group mb-3">
               <label for="radius" class="form-label">Radius: </label>
               <b id="radius_text">1</b>
               <input type="range" class="form-range" min="0" max="5" step="0.1" id="radius" value="1">
            </div>
            <div class="input-group mb-3">
               <label for="Shininess" class="form-label">Shininess: </label>
               <b id="Shininess_text">12</b>
               <input type="range" class="form-range" min="12" max="32" step="1" id="Shininess" value="1">
            </div>
            <div class="input-group mb-3">
               <label for="scale" class="form-label">Zoom: </label>
               <b id="scale_text">1</b>
               <input type="range" class="form-range" min="0.2" max="1" step="0.1" id="scale" value="0.3">
            </div>
            <div class="input-group mb-3">
               <label for="LightIntensity" class="form-label">Light Intensity: </label>
               <b id="LightIntensity_text">1</b>
               <input type="range" class="form-range" min="0" max="5" step="0.1" id="LightIntensity" value="1">
            </div>

            <div class="input-group mb-3">
               <span class="input-group-text">Ambient</span>
               <input id="AmbientColor" type="color" class="form-control h-auto d-inline-block" aria-describedby="AmbientColor" value="#191919">
            </div>
            <div class="input-group mb-3">
               <span class="input-group-text">Diffuse</span>
               <input id="DiffuseColor" type="color" class="form-control h-auto d-inline-block" aria-describedby="DiffuseColor" value="#B21919">
            </div>
            <div class="input-group mb-3">
               <span class="input-group-text">Specular</span>
               <input id="SpecularColor" type="color" class="form-control h-auto d-inline-block" aria-describedby="SpecularColor" value="#DCDCDC">
            </div>
         </div>
      </div>
   </div>

</body>

<script>
   var input_a = document.getElementById("AmbientColor");
   var input_d = document.getElementById("DiffuseColor");
   var input_s = document.getElementById("SpecularColor");
   var input_li = document.getElementById("LightIntensity");
   var input_sh = document.getElementById("Shininess");
   var input_sc = document.getElementById("scale");
   var input_r = document.getElementById("radius");


   input_a.addEventListener("input", function() {
      AmbientColor = [hexToRgb(this.value).r / 255, hexToRgb(this.value).g / 255, hexToRgb(this.value).b / 255];
      draw();
   }, false);

   input_d.addEventListener("input", function() {
      DiffuseColor = [hexToRgb(this.value).r / 255, hexToRgb(this.value).g / 255, hexToRgb(this.value).b / 255];
      draw();
   }, false);

   input_s.addEventListener("input", function() {
      SpecularColor = [hexToRgb(this.value).r / 255, hexToRgb(this.value).g / 255, hexToRgb(this.value).b / 255];
      draw();
   }, false);

   input_sh.addEventListener("input", function() {
      Shininess = this.value;
      document.getElementById("Shininess_text").innerHTML = Shininess;
      draw();
   }, false);

   input_li.addEventListener("input", function() {
      LightIntensity = this.value;
      document.getElementById("LightIntensity_text").innerHTML = LightIntensity;
      draw();
   }, false);

   input_sc.addEventListener("input", function() {
      scale = this.value;
      document.getElementById("scale_text").innerHTML = scale;
      draw();
   }, false);

   input_r.addEventListener("input", function() {
      ModelRadius = this.value;
      document.getElementById("radius_text").innerHTML = ModelRadius;
      BuildSurface();
      draw();
   }, false);


   function hexToRgb(hex) {
      var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
         r: parseInt(result[1], 16),
         g: parseInt(result[2], 16),
         b: parseInt(result[3], 16)
      } : null;
   }

</script>

</html>